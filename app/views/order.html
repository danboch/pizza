<h1>Zamówienie</h1>

<hr/>

<div class="form-group" ng-show="order.status == 'open'">

    <label>Nowa pizza</label>

    <div class="input-group">

        <input class='form-control input-lg' type="text" ng-model="newPizzaName" placeholder="Nazwa pizzy"/>

          <span class="input-group-btn">
            <button class="btn btn-success btn-lg" ng-click="addPizza(newPizzaName)">
                dodaj
                pizze
            </button>
          </span>
    </div>
</div>


<div class="form-group">

    <label>Łączna cena</label>

    <div class="input-group">

        <input class='form-control input-lg' type="text" ng-model="order.price" placeholder="Łączna cena"/>

          <span class="input-group-btn">
            <button class="btn btn-success btn-lg" ng-click="updatePrice()">Zapisz cenę</button>
          </span>
    </div>
</div>

<hr/>

<div class="pizzas">
    <!-- todo error jak sie wyawli-->
    <div class="pizza well" ng-repeat="pizza in order.pizzas track by $index " ng-if="pizza && pizza.name"
         ng-class="{'pizza-success': pizzaIsEaten(pizza)}">
        <h3>{{ pizza.name }}
            <button class="btn btn-danger btn-xs delete" ng-click="removePizza(pizza)" ng-show="order.status == 'open'">
                x
            </button>
        </h3>
        <nvd3-pie-chart interactive="true" objectequality="true" data="pizza.pieces" width="400" height="400"
                        x="xFunction()" y="yFunction()"
                        showlabels="true" color="colorFunction()">
        </nvd3-pie-chart>
    </div>
    <div class="clearfix"></div>
</div>

<hr/>

<div class="row">

    <div class="col-lg-6">
    </div>
    <div class="col-lg-6" style="text-align: right;">
        <div class="input-group" ng-show="order.status == 'locked'">
          <span class="input-group-btn">
            <button class="btn btn-success btn-lg" ng-click="markOrdered()">Mark as
                ordered
            </button>
          </span>

            <input class='form-control input-lg' id="exampleInput" name="input" ng-model="minutesToDelivery"
                   ng-show="order.status == 'locked'" required/> <span class="input-group-addon">minutes left</span>
                   
        </div>

        <button class="btn btn-success btn-lg" ng-click="lockOrder()" ng-show="order.status == 'open'">Lock order</button>

    </div>
</div>


<hr>

<h1 style="margin-top: 50px; margin-bottom: 30px;">Podsumowanie</h1>
<div><h4>Total price: <strong>{{ price }} zł</strong>, price per piece: <strong>{{ pricePerPiece }} zł</strong></h4>
    <table class="table">
        <tr ng-repeat="item in summary">
            <td>{{ item.person }}: {{ item.number }} pieces = {{ item.price }} zł</td>
        </tr>
    </table>


    <div ng-show="showMap()" >
    	Pizza will be delivered in {{ timeToDelivery()/60 | number: 0 }} minutes.
    	<div id="controls">
      		<button ng-click="start()">Gdzie jest moja pica ?</button>
    	</div>
    </div>
    {{ showMap() }}
    <div ng-show="showMap()" style="width: 700px; height: 500px">	
    	<div id="map" style="width: 700px; height: 500px"></div>
	</div>

<div ng-show="pizzaDelivered()">
	<h3>Pizza delivered!</h3>
</div>
    
</div>
