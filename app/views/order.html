<h1>Order</h1>

<div>
    <input type="text" ng-model="newPizzaName" placeholder="Nazwa pizzy"/>
    <button ng-click="addPizza(newPizzaName)" ng-show="order.status == 'open'">dodaj pizze</button>
</div>

<div>
    <label>Łączna cena</label>
    <input type="text" ng-model="order.price" placeholder="Łączna cena"/>
    <button ng-click="updatePrice()">Zapisz cenę</button>
</div>

<hr/>

<div class="pizzas">
    <!-- todo error jak sie wyawli-->
    <div class="pizza well" ng-repeat="pizza in order.pizzas track by $index " ng-if="pizza && pizza.name" ng-class="{'pizza-success': pizzaIsEaten(pizza)}">
        <h3>{{ pizza.name }} <button class="btn btn-danger btn-xs delete" ng-click="removePizza(pizza)" ng-show="order.status == 'open'">x</button></h3>
        <nvd3-pie-chart interactive="true" objectequality="true" data="pizza.pieces" width="400" height="400" x="xFunction()" y="yFunction()"
                        showlabels="true" color="colorFunction()">
        </nvd3-pie-chart>
    </div>
    <div class="clearfix"></div>
</div>

<hr/>

<button ng-click="lockOrder()" ng-show="order.status == 'open'">Lock order</button>
<button ng-click="markOrdered()" ng-show="order.status == 'locked'">Mark as ordered</button>
<input id="exampleInput" name="input" ng-model="minutesToDelivery" ng-show="order.status == 'locked'" required/> minutes
       
      {{ timeToDelivery() }}
      {{ showMap() }}
      {{ pizzaDelivered() }}
      
      
      
      
      
<hr>
      
      <div>Total price: {{ price }} zł, price per piece: {{ pricePerPiece }} zł
<table>
	<tr ng-repeat="item in summary">
		<td>{{ item.person }}: {{ item.number }} pieces = {{ item.price }} zł</td>
	</tr>
</table>

    
    <div ng-if="showMap()" id="map" style="width: 700px; height: 500px"></div>


    <script type="text/javascript">
    //<![CDATA[


    // This Javascript is based on code provided by the
    // Community Church Javascript Team
    // http://www.bisphamchurch.org.uk/   
    // http://econym.org.uk/gmap/

    //]]>
    </script></div>